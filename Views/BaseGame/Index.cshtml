@{
    ViewData["Title"] = "Clicker";
}

@model ASPClicker.Models.BaseGame
<h2>Игра-кликер</h2>

<div class="container">
    <div class="sidebar">
        <div class="modification-area">
            <h3>Модификации</h3>
            @foreach (var modification in Model.Modifications)
            {
                <div class="modification-card">
                    <h4>@modification.Description</h4>
                    <p class="modification-cost">Цена: <span class="cost-value">@modification.Cost</span> очков</p>
                    <button id="@modification.Id" class="modification-btn" data-cost="@modification.Cost">Купить</button>
                </div>
            }
        </div>
        <div class="upgrade-area">
            <h3>Улучшения</h3>
            @foreach (var upgrade in Model.Upgrades)
            {
                <div class="upgrade-card">
                    <h4>@upgrade.Description</h4>
                    <p class="upgrade-cost">Цена: <span class="cost-value">@upgrade.Cost</span> очков</p>
                    <p>Прибыль: +@upgrade.Increment за клик</p>
                    <button id="@upgrade.Id" class="upgrade-btn" data-cost="@upgrade.Cost" data-original-cost="@upgrade.Cost" data-increment="@upgrade.Increment" @(Model.Score < upgrade.Cost ? "disabled" : "")>Купить</button>
                    <p>Куплено: <span id="@(upgrade.Id)_count">@upgrade.Count</span></p>
                </div>
            }
        </div>
    </div>
    <div class="game-area">
        <div>
            Очки: <span id="scoreDisplay">@Model.Score</span>
        </div>
        <div class="click-circle" id="clickCircle"></div>
        <div>
            Очки за клик: <span id="pointsPerClick">@Model.ClickPower</span>
        </div>
        <div>
            Шанс критического клика: <span id="critChance">@Model.CritChance.ToString("F2")</span>%
        </div>
        <p id="criticalClickMessage" style="display: none;">CRITICAL HIT!</p>
    </div>
</div>

@section Scripts {
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/js/clicker.js"></script>
}